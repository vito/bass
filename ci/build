#!/usr/bin/env bass

(use (*dir*/../project))

(defn parse-args [args]
  (case args
    ; default 3rd arg (title) to tag
    [sha] [sha "linux" "amd64"]

    ; let it fail at pattern-match time
    _ args))

(defn main args
  (let [[sha os arch] (parse-args args)
        binary (project:build (project:checkout sha) os arch)]
    (emit binary *stdout*)))
